<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secondary Student Registration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        form {
            max-width: 600px;
            margin: auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        label {
            font-weight: bold;
            margin-top: 10px;
        }
        input, select {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            border-radius: 5px;
        }
        button:hover {
            background-color: #45a049;
        }
        .delete-btn {
            background-color: #f44336;
            color: white;
            padding: 5px 10px;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }
        .delete-btn:hover {
            background-color: #e53935;
        }
        table {
            width: 100%;
            margin-top: 30px;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid #ddd;
            text-align: left;
            padding: 8px;
        }
        th {
            background-color: #4CAF50;
            color: white;
        }
        img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 50%;
        }
                /* Basic styling for body */
                body {
          font-family: Arial, sans-serif;
          margin: 0;
          padding: 0;
          background-color: #f4f4f4;
        }
    
        /* Header styles */
        header {
          background-color: #2C3E50;
          color: white;
          padding: 20px;
          text-align: center;
          position: relative;
          overflow: hidden;
        }
    
        /* Logo styles */
        .logo {
          width: 150px;
          height: auto;
          animation: logoAnimation 6s ease-in-out infinite;
        }
    
        /* Animation for logo */
        @keyframes logoAnimation {
          0% { transform: scale(1); opacity: 0.8; }
          50% { transform: scale(1.1); opacity: 1; }
          100% { transform: scale(1); opacity: 0.8; }
        }
    
        /* Title animation */
        .school-name {
          font-size: 40px;
          font-weight: bold;
          margin-top: 10px;
          animation: titleAnimation 6s ease-in-out infinite;
        }
    
        /* Animation for title */
        @keyframes titleAnimation {
          0% { transform: translateY(-20px); opacity: 0; }
          50% { transform: translateY(10px); opacity: 1; }
          100% { transform: translateY(-20px); opacity: 0; }
        }
    
        /* Subtitle */
        .subtitle {
          font-size: 18px;
          margin-top: 5px;
          color: #ecf0f1;
          animation: subtitleAnimation 6s ease-in-out infinite;
        }
    
        /* Animation for subtitle */
        @keyframes subtitleAnimation {
          0% { transform: translateX(-20px); opacity: 0; }
          50% { transform: translateX(10px); opacity: 1; }
          100% { transform: translateX(-20px); opacity: 0; }
        }
        
    /* Style for links */
    a {
      color: #3498db;
      text-decoration: none;
      font-size: 18px;
      font-family: Arial, Helvetica, sans-serif;
    }

    a:hover {
      text-decoration: underline;
    }
    </style>
</head>
<body>
    <header>
        <!-- School Logo -->
        <img src="122.png" alt="School Logo" class="logo">
    
        <!-- School Name -->
        <div class="school-name">BISHOP DANSTAN NSUBUGA MEMORIAL SECONDARY SCHOOL</div>
    
        <!-- Subtitle -->
        <div class="subtitle">knowledge Is Power</div>
        
        <div class="header-links">
 
 <!-- Links to other pages -->
    
 <TABLE>
    
        <TR>
            <a href="registration database.html">SCHOOL REG & DATABSE</a>
        </TR>
</TABLE>

<a href="check in out form.html">GET PASS</a>
      </p>
    </div>
      </header>
    <center><h2> School Student Registration</h2></center>
    <form id="registrationForm">
        <label for="name">Full Name</label>
        <input type="text" id="name" name="name" required>

        <label for="dob">Date of Birth</label>
        <input type="date" id="dob" name="dob" required>

        <label for="gender">Gender</label>
        <select id="gender" name="gender" required>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
        </select>

        <label for="phone">Phone Number</label>
        <input type="text" id="phone" name="phone" required>

        <label for="address">Home Address</label>
        <input type="text" id="address" name="address" required>

        <label for="guardian">Guardian's Name</label>
        <input type="text" id="guardian" name="guardian" required>

        <label for="guardianPhone">Guardian's Phone Number</label>
        <input type="text" id="guardianPhone" name="guardianPhone" required>

        <label for="guardianEmail">Guardian's Email Address</label>
        <input type="email" id="guardianEmail" name="guardianEmail" required>

        <label for="school">School Attending</label>
        <select id="school" name="school" required>
            <option value="Day Student">Day Student</option>
            <option value="Boarding Student">Boarding Student</option>
        </select>

        <label for="stream">Stream (e.g., S1, S2, etc.)</label>
        <input type="text" id="stream" name="stream" required>

        <label for="studentImage">Upload Student Image</label>
        <input type="file" id="studentImage" name="studentImage" accept="image/*">

        <button type="submit">Register</button>
    </form>

    <h2>Registered Students</h2>
    <table id="studentsTable">
        <thead>
            <tr>
                <th>Image</th>
                <th>ID Number</th>
                <th>Name</th>
                <th>Date of Birth</th>
                <th>Gender</th>
                <th>Phone</th>
                <th>Address</th>
                <th>Guardian</th>
                <th>Guardian Phone</th>
                <th>Guardian Email</th>
                <th>School</th>
                <th>Stream</th>
                <th>House</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <!-- Data will be added here -->
        </tbody>
    </table>

    <script>
        // Initialize a counter for student IDs
        let studentIdCounter = 1;

        // List of houses
        const houses = ["Willis", "Stuat", "Hannington", "Brown"];

        // Variable to keep track of the last house assigned
        let lastAssignedHouseIndex = -1;

        // Load saved students from localStorage if available
        function loadStudents() {
            const savedStudents = JSON.parse(localStorage.getItem('students')) || [];
            savedStudents.forEach(student => addStudentToTable(student));
            studentIdCounter = savedStudents.length + 1;
        }

        // Save students to localStorage
        function saveStudents(students) {
            localStorage.setItem('students', JSON.stringify(students));
        }

        // Add student to the table
        function addStudentToTable(student) {
            const tableBody = document.querySelector('#studentsTable tbody');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td><img src="${student.image}" alt="Student Image"></td>
                <td>${student.id}</td>
                <td>${student.name}</td>
                <td>${student.dob}</td>
                <td>${student.gender}</td>
                <td>${student.phone}</td>
                <td>${student.address}</td>
                <td>${student.guardian}</td>
                <td>${student.guardianPhone}</td>
                <td>${student.guardianEmail}</td>
                <td>${student.school}</td>
                <td>${student.stream}</td>
                <td>${student.house}</td>
                <td><button class="delete-btn" onclick="deleteRow(this)">Delete</button></td>
            `;
            tableBody.appendChild(newRow);
        }

        // Function to assign a house in a round-robin manner
        function assignHouse() {
            // Increment index to rotate through houses in a round-robin fashion
            lastAssignedHouseIndex = (lastAssignedHouseIndex + 1) % houses.length;
            return houses[lastAssignedHouseIndex];
        }

        // Handle form submission
        document.getElementById('registrationForm').addEventListener('submit', function(event) {
            event.preventDefault();

            // Generate a unique ID based on the counter
            const studentId = 'ID' + studentIdCounter++;

            // Gather form data
            const name = document.getElementById('name').value;
            const dob = document.getElementById('dob').value;
            const gender = document.getElementById('gender').value;
            const phone = document.getElementById('phone').value;
            const address = document.getElementById('address').value;
            const guardian = document.getElementById('guardian').value;
            const guardianPhone = document.getElementById('guardianPhone').value;
            const guardianEmail = document.getElementById('guardianEmail').value;
            const school = document.getElementById('school').value;
            const stream = document.getElementById('stream').value;

            // Handle image upload
            const imageInput = document.getElementById('studentImage');
            let studentImage = '';

            if (imageInput.files && imageInput.files[0]) {
                const reader = new FileReader();

                // Read the image asynchronously
                reader.onload = function(e) {
                    studentImage = e.target.result; // Get the base64 image data URL

                    // Automatically assign a house
                    const assignedHouse = assignHouse();

                    // After reading the image, create student object and add to the table
                    const newStudent = {
                        id: studentId,
                        name,
                        dob,
                        gender,
                        phone,
                        address,
                        guardian,
                        guardianPhone,
                        guardianEmail,
                        school,
                        stream,
                        house: assignedHouse,
                        image: studentImage
                    };

                    // Add the student to localStorage
                    const savedStudents = JSON.parse(localStorage.getItem('students')) || [];
                    savedStudents.push(newStudent);
                    saveStudents(savedStudents);

                    // Add student to the table
                    addStudentToTable(newStudent);

                    // Clear the form fields
                    document.getElementById('registrationForm').reset();
                };

                reader.readAsDataURL(imageInput.files[0]); // Read the image as base64 data
            }
        });

        // Function to delete a row from the table
        function deleteRow(button) {
            const row = button.closest('tr');
            const studentId = row.cells[1].textContent; // Get student ID (in column 2)

            // Remove from localStorage
            const savedStudents = JSON.parse(localStorage.getItem('students')) || [];
            const updatedStudents = savedStudents.filter(student => student.id !== studentId);
            saveStudents(updatedStudents);

            // Remove row from the table
            row.remove();
        }

        // Load students on page load
        window.onload = loadStudents;
    </script>
</body>
</html>
